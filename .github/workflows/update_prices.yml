name: Update MWI Market Data

on:
  schedule:
    - cron: '*/30 * * * *' # æ¯ 30 åˆ†é˜è‡ªå‹•æ›´æ–°ä¸€æ¬¡
  workflow_dispatch:      # å…è¨±æ‰‹å‹•é»æ“ŠæŒ‰éˆ•æ›´æ–°

jobs:
  update-data:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Fetch Market Data
        run: |
          curl -H "User-Agent: Mozilla/5.0" https://www.milkywayidle.com/game_data/marketplace.json -o data.json

      - name: Commit and Push
        run: |
          git config --global user.name "GitHub Action"
          git config --global user.email "action@github.com"
          git add data.json
          git commit -m "ğŸš€ è‡ªå‹•æ›´æ–°å¸‚å ´å–®åƒ¹: $(date)" || exit 0
          git push
